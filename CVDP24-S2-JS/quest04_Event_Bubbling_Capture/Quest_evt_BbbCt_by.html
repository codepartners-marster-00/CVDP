<!DOCTYPE html>
<html lang="ko">

<head>
	<title>Quest04 | EVENT | CVDP24-S2</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<link rel="stylesheet" type="text/css" href="../assets/css/reset.css">

	<style>
		dl.eventInfo {
			display: block;
			margin: 20px;
		}

		dl.eventInfo dt {
			margin-block: 10px;
			font-weight: bold;
		}

		dl.eventInfo dd:not(:first-child) {
			margin-top: 5px;
			font-weight: bolder;
		}
	</style>
</head>

<body>
	<header id="header">
		<h1>Quest04 | EVENT-bubbling/capturing | CVDP24-S2</h1>
	</header>

	<!--  container -->
	<div id="container" class="container Quest04">
		<div class="wrap">

			<section data-part="subject">
				<h2>[1] EVENT ì „íŒŒ </h2>
				<p>
					div2 ìš”ì†Œì˜ ë‘ë²ˆì§¸ ìì‹ ìš”ì†Œì¸ p2 ìš”ì†Œë¥¼ í´ë¦­í•˜ë©´ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.<br>
					ì´ë•Œ ìƒì„±ëœ ì´ë²¤íŠ¸ ê°ì²´ëŠ” <code>ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ DOM ìš”ì†Œì¸ ì´ë²¤íŠ¸ íƒ€ê¹ƒì„ ì¤‘ì‹¬</code>ìœ¼ë¡œ DOM íŠ¸ë¦¬ë¥¼ í†µí•´ ì „íŒŒë©ë‹ˆë‹¤.<br>
				</p>
				<ul>
					<li><span>ìº¡ì³ë§ ë‹¨ê³„ (capturing phase) : ì´ë²¤íŠ¸ê°€ ìƒìœ„ ìš”ì†Œì—ì„œ í•˜ìœ„ ìš”ì†Œ ë°©í–¥ìœ¼ë¡œ ì „íŒŒ</span></li>
					<li><span>íƒ€ê¹ƒ ë‹¨ê³„ (target phase) : ì´ë²¤íŠ¸ê°€ ì´ë²¤íŠ¸ íƒ€ê¹ƒì— ë„ë‹¬</span></li>
					<li><span>ë²„ë¸”ë§ ë‹¨ê³„ (bubbling phase) : ì´ë²¤íŠ¸ê°€ í•˜ìœ„ ìš”ì†Œì—ì„œ ìƒìœ„ ìš”ì†Œ ë°©í–¥ìœ¼ë¡œ ì „íŒŒ</span></li>
				</ul>
				<p class="task">
					ğŸ‘‡<span> ì•„ë˜ divë¥¼ í´ë¦­í•´ë³´ì„¸ìš”.</span>
				</p>
				<div onclick="alert('div1')">div1
					<div onclick="alert('div2')">div2
						<p onclick="alert('p1')">p1</p>
						<p onclick="alert('p2')">p2</p>
					</div>
				</div>

				<p>***
					<a href="https://www.freecodecamp.org/news/event-propagation-event-bubbling-event-catching-beginners-guide/#how-event-bubbling-happens-in-javascript"
						target="_blank">
						ì°¸ê³ ì‚¬ì´íŠ¸_1_ìƒˆì°½ ì—´ê¸°</a>
				</p>
				<p>***
					<a href="https://blog.bitsrc.io/event-bubbling-and-capturing-in-javascript-6bc908321b22"
						target="_blank">
						ì°¸ê³ ì‚¬ì´íŠ¸_2_ìƒˆì°½ ì—´ê¸°</a>
				</p>
			</section>

			<hr>

			<section data-part="Perform">
				<h2>[2] e.eventPhase ë‹¨ê³„ ì´í•´</h2>
				<article class="task">
					<h3>ğŸ§™ìˆ˜í–‰ê³¼ì œ</h3>
					<ul>
						<li><span>div ì„ íƒ ì‹œ, í•˜ë‹¨ì˜ <code>#evtPhase</code>ì— ì´ë²¤íŠ¸ ë‹¨ê³„ì˜ ì •ë³´ë¥¼ ë…¸ì¶œí•˜ì„¸ìš” </span></li>
						<li><span>ì„ íƒëœ divëŠ” <code>style="background-color: red;"</code>ë¥¼ ì¶”ê°€í•˜ì„¸ìš”</span></li>
						<li><span>ì²´í¬ë°•ìŠ¤ #evtChangeë¥¼ í†µí•´ ì´ë²¤íŠ¸ ë‹¨ê³„(ë²„ë¸”ë§/ìº¡ì³ë§)ë¥¼ ì „í™˜í•˜ì„¸ìš”</span></li>
					</ul>
				</article>

				<!-- ë¯¸ì…˜ ì‹œì‘  -->
				<input type="checkbox" id="evtChange" name="use Capturing">
				<label for="evtChange">ìº¡ì³ë§ìœ¼ë¡œ ì „í™˜</label>
				<div id="d1">d1
					<div id="d2">d2
						<div id="d3">d3
							<div id="d4">d4
							</div>
						</div>
					</div>
				</div>
				<div id="evtPhase"> <!-- ë²„ë¸”ë§/ìº¡ì³ë§ ë¡œê·¸ -->
					<p>(ì˜ˆì‹œ) d1; event: target</p>
					<p>(ì˜ˆì‹œ) d1; event: bubbling</p>
				</div>

				<script>
					// íŒíŠ¸!
					let clear = false;
					let divInfo = null;
					let divs = null;
					let evtChange = null;

					window.onload = () => {
						divInfo = document.getElementById("evtPhase");
						divs = document.getElementsByTagName("div");
						// HTML collection ìœ ì‚¬ë°°ì—´ì„ ë°°ì—´ë¡œ ë§Œë“¬
						const divsArray = Array.from(divs);
						// ë°°ì—´ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì¶”ì¶œ(d1, d2, d3, d4)
						const divsTarget = divsArray.splice(4, 4);

						addListeners(false);

						evtChange = document.getElementById("evtChange");
						evtChange.onclick = () => {
							removeListeners(evtChange.checked); // ì´ë²¤íŠ¸ ì´ˆê¸°í™”
							addListeners(evtChange.checked); // ì´ë²¤íŠ¸ ì‹¤í–‰
							clearDivs(); // ì„ íƒëì—ˆë˜ div ì´ˆê¸°í™”
						};
						clearDivs();

						function clickEventDetail(e) {
							changeColor(divsTarget, e);
							createTag(divInfo, e.eventPhase, e);
						}

						function removeListeners(bool) {
							divsTarget.forEach(target => {
								target.removeEventListener('click', clickEventDetail, !bool);
							});
						}

						function addListeners(bool) {
							divsTarget.forEach(target => {
								target.addEventListener('click', clickEventDetail, bool);
							});
						}

						function clearDivs() {
							divsTarget.forEach(el => {
								el.style.backgroundColor = "#ffffff";
							});
							divInfo.innerText = ' ';
							divInfo.appendChild(document.createElement('p')).innerText = `(ì˜ˆì‹œ) d1; event: target`
							divInfo.appendChild(document.createElement('p')).innerText = `(ì˜ˆì‹œ) d1; event: bubbling`
						}

						function changeColor(white, red) {
							white.forEach(el => {
								el.style.backgroundColor = "#ffffff";
							});
							red.target.style.backgroundColor = "red";
						}

						function createTag(el, currentPhase, e) {
							const pNew = document.createElement('p');
							switch (currentPhase) {
								case 1:
									el.appendChild(pNew).innerText = `${e.currentTarget.id} : capturing`;
									break;
								case 2:
									el.appendChild(pNew).innerText = `${e.target.id} : target`;
									break;
								case 3:
									el.appendChild(pNew).innerText = `${e.currentTarget.id} : bubbling`;
									break;
							}
						}

					};

					// í•„ìš”í•œ ë‚´ìš©
					// 1. eventPhase ì†ì„±ì„ ì´ìš©í•´ í˜„ì¬ì˜ ì´ë²¤íŠ¸ ë‹¨ê³„ë¥¼ í™•ì¸
					// 2. ì„ íƒëœ divì— ì¶”ê°€ë  ìŠ¤íƒ€ì¼ : e.currentTarget.style.backgroundColor = "red";
					// 3. ì •ë³´ ë…¸ì¶œì„ ìœ„í•œ ìš”ì†Œ ì¶”ê°€ : document.createElement("p");
				</script>
				<!-- ë¯¸ì…˜ ë -->
			</section>

			<section>
				<h2>[3] ì´ë²¤íŠ¸ ì „íŒŒë¥¼ í•  ìˆ˜ ì—†ëŠ” ê²½ìš°</h2>
				<p>
					ëŒ€ë¶€ë¶„ì˜ ì´ë²¤íŠ¸ëŠ” ìº¡ì³ë§ê³¼ ë²„ë¸”ë§ì„ í†µí•´ ì „íŒŒë˜ì§€ë§Œ, ë‹¤ìŒ ì´ë²¤íŠ¸ì˜ ê²½ìš° ë²„ë¸”ë§ì´ ì „íŒŒë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
					ì´ ì´ë²¤íŠ¸ë“¤ì€ event.bubblesì˜ ê°’ì´ ëª¨ë‘ falseì…ë‹ˆë‹¤.<br><br>
					* event.bubbles : ë²„ë¸”ë§ì„ í†µí•´ ì´ë²¤íŠ¸ë¥¼ ì „íŒŒí•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì´ë²¤íŠ¸ ê°ì²´ì˜ ê³µí†µ í”„ë¡œí¼í‹°
				</p>
				<ul>
					<li><span>í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ focus/blur</span></li>
					<li><span>ë¦¬ì†ŒìŠ¤ ì´ë²¤íŠ¸ load/unload/abort/errer</li>
					<li><span>ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ mouseenter/mouseleave</span></li>
				</ul>
				<p>
					ì´ë²¤íŠ¸ íƒ€ê¹ƒì˜ ìƒìœ„ ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•˜ë ¤ë©´ ìº¡ì³ë§ ë‹¨ê³„ì˜ ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
				</p>
				<p class="task">
					<span>ë˜ëŠ”, ì´ì— ë”°ë¼ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ëŒ€ì²´ ì´ë²¤íŠ¸ëŠ” ë¬´ì—‡ì´ ìˆì„ì§€ ì°¾ì•„ë³´ì„¸ìš”!</span>ğŸ
				</p>

				<dl class="eventInfo">
					<dt>í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ focus/blur</dt>
					<dd>1. focusin/focusoutì„ ì‚¬ìš©í•˜ë©´ ë²„ë¸”ë§/ìº¡ì³ë§ ê°€ëŠ¥</dd>
				</dl>
				<dl class="eventInfo">
					<dt>ë¦¬ì†ŒìŠ¤ ì´ë²¤íŠ¸ load/unload/abort/errer</dt>
					<dd>1. </dd>
				</dl>
				<dl class="eventInfo">
					<dt>ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ mouseenter/mouseleave</dt>
					<dd>1. mouseOver/mouseOutì„ ì‚¬ìš©í•˜ë©´ ë²„ë¸”ë§/ìº¡ì³ë§ ê°€ëŠ¥</dd>
				</dl>
			</section>


		</div>
	</div>
	<!-- // container -->
	<footer id="footer"></footer>

	<script>

	</script>
</body>

</html>